ApexCharts.exec(
  '<%= @total ? "totals-" : "" %>chart-<%= request.path.parameterize %>',
  "updateSeries",
  JSON.parse(`<%= raw(@series.to_json) %>`),
  true
);
ApexCharts.exec(
  '<%= @total ? "totals-" : "" %>chart-<%= request.path.parameterize %>',
  "updateOptions",
  {
    xaxis: {
      labels: {
        style: {
          cssClass: "_<%= @range.key %>"
        }
      }
    }
  }
);

Array
  .from(document.querySelectorAll("<%= @ranges_container_selector %> a"))
  .forEach(link => link.classList.remove("active"))
document
  .querySelector("<%= @ranges_container_selector %>")
  .querySelector("[class=\"<%= @range.key %>\"]")
  .classList.add("active")
